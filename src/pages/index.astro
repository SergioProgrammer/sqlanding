---
import Layout from "@/layouts/Layout.astro"
import Cursos from "@/pages/cursos.astro"
// Imagenes
import HeroKeyLogo from "@/assets/hero-key-logo.svg" 

// logos
import Logo1 from "@/assets/logos/logo1.svg"
import Logo2 from "@/assets/logos/logo2.svg"
import Logo3 from "@/assets/logos/logo3.svg"
import Logo4 from "@/assets/logos/logo4.svg"
import Logo5 from "@/assets/logos/logo5.svg"
import Logo6 from "@/assets/logos/logo6.svg" 
import Logo7 from "@/assets/logos/logo7.svg"
import Logo8 from "@/assets/logos/logo8.svg"
import Logo9 from "@/assets/logos/logo9.svg"
import Logo10 from "@/assets/logos/logo10.svg"
import Logo11 from "@/assets/logos/logo11.svg"

// SVGs objetos
import SvgDiseno1 from "@/assets/objects1/azul1.svg"
import SvgDiseno2 from "@/assets/objects1/azul2.svg"
import SvgDiseno3 from "@/assets/objects1/naranja3.svg"
import SvgDiseno4 from "@/assets/objects1/naranja1.svg"
import SvgDiseno5 from "@/assets/objects1/naranja2.svg"

import SvgMarketing1 from "@/assets/objects2/ama1.svg"
import SvgMarketing2 from "@/assets/objects2/ama2.svg"
import SvgMarketing3 from "@/assets/objects2/ama3.svg"
import SvgMarketing4 from "@/assets/objects2/azul3.svg"
import SvgMarketing5 from "@/assets/objects2/azul4.svg"

import SvgDesarrollo1 from "@/assets/objects2/ama1.svg"
import SvgDesarrollo2 from "@/assets/objects2/ama2.svg"
import SvgDesarrollo3 from "@/assets/objects2/ama3.svg"
import SvgDesarrollo4 from "@/assets/objects2/azul3.svg"
import SvgDesarrollo5 from "@/assets/objects2/azul4.svg"
---

<Layout>
  <div id="intro-animation-container" class="fixed pointer-events-none top-0 left-0 w-full h-screen z-50">
    <section>
      <picture
        id="hero-key"
        class="h-screen scale-150 block overflow-hidden fixed w-full"
      >
        <div
          id="hero-background-color"
          class="w-full h-full absolute top-0 left-0"
          style="background: #fefba4;" 
        ></div>
        <img
          id="hero-key-logo"
          src={HeroKeyLogo.src}
          class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 max-w-[70vw] max-h-[30vh] sm:w-64 md:w-134 opacity-100 z-20"
          alt="Initial Hero Logo"
        />
      </picture>

      <div id="logo-mask" class="fixed top-0 left-0 w-full h-screen z-10">
          </div>
    </section>
  </div>

  <span
    id="final-message"
    class="fixed pointer-events-none flex justify-center items-center top-0 left-0 w-full h-screen text-2xl sm:text-4xl md:text-6xl font-semibold opacity-0 z-40 text-center"
    style="background: #042e36; color: #fbd04a;"
  >
    DISEÑO GRÁFICO Y DESARROLLO WEB
  </span>

  <div
  id="after-hero"
  class="fixed pointer-events-none flex flex-col items-center justify-center top-0 left-0 w-full h-screen opacity-0 z-40 text-center px-4"
  style="background: #042e36; color: #fbd04a;"
>
  <span class="text-lg sm:text-6xl font-semibold drop-shadow mb-19">
    EMPRESAS QUE CONFIAN EN NOSOTROS
  </span>
  <div class="grid grid-cols-2 sm:grid-cols-3 gap-6">
    <img src={Logo1.src} alt="Logo 1" class="h-12 sm:h-16 filter grayscale mx-auto" />
    <img src={Logo2.src} alt="Logo 2" class="h-12 sm:h-16 filter grayscale mx-auto" />
    <img src={Logo3.src} alt="Logo 3" class="h-12 sm:h-16 filter grayscale mx-auto" />
    <img src={Logo4.src} alt="Logo 4" class="h-12 sm:h-16 filter grayscale mx-auto" />
    <img src={Logo5.src} alt="Logo 5" class="h-12 sm:h-16 filter grayscale mx-auto" />
    <img src={Logo6.src} alt="Logo 6" class="h-12 sm:h-16 filter grayscale mx-auto" />
    <img src={Logo7.src} alt="Logo 7" class="h-12 sm:h-16 filter grayscale mx-auto" />
    <img src={Logo8.src} alt="Logo 8" class="h-12 sm:h-16 filter grayscale mx-auto" />
    <img src={Logo9.src} alt="Logo 9" class="h-12 sm:h-16 filter grayscale mx-auto" />
    <img src={Logo10.src} alt="Logo 10" class="h-12 sm:h-16 filter grayscale mx-auto" />
    <img src={Logo11.src} alt="Logo 11" class="h-12 sm:h-16 filter grayscale mx-auto" />
  </div>
</div>

  <!-- Sección DISEÑO -->
  <div
    id="pantalla-diseno"
    class="fixed pointer-events-none w-full h-screen flex flex-col items-center justify-center top-0 left-0 opacity-0 z-30 text-center px-4"
    style="background: #fefba4"
  >
      <img id="svg-diseno-1" src={SvgDiseno1.src} class="absolute left-8 top-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 1" />
      <img id="svg-diseno-2" src={SvgDiseno2.src} class="absolute right-8 top-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 2" />
      <img id="svg-diseno-3" src={SvgDiseno3.src} class="absolute left-1/4 bottom-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 3" />
      <img id="svg-diseno-4" src={SvgDiseno4.src} class="absolute right-1/4 bottom-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 4" />
      <img id="svg-diseno-5" src={SvgDiseno5.src} class="absolute left-1/2 top-1/4 -translate-x-1/2 -translate-y-1/2 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem] pointer-events-none" alt="Decorativo 5" />
    <div class="relative z-10 flex flex-col items-center">
      <span class="text-3xl sm:text-6xl font-bold text-[#f79b33] mb-6 drop-shadow">
        Diseño gráfico
      </span>
      <span class="text-base sm:text-4xl text-[#f79b33]/80">
        Creatividad, identidad visual y comunicación efectiva para tu marca.
      </span>
    </div>
  </div>

  <!-- Sección MARKETING -->
  <div
    id="pantalla-marketing"
    class="fixed pointer-events-none flex flex-col items-center justify-center top-0 left-0 w-full h-screen opacity-0 z-30 text-center px-4"
    style="background: #fbd04a"
  >
    <img id="svg-marketing-1" src={SvgMarketing1.src} class="absolute left-8 top-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 1" />
    <img id="svg-marketing-2" src={SvgMarketing2.src} class="absolute right-8 top-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 2" />
    <img id="svg-marketing-3" src={SvgMarketing3.src} class="absolute left-1/4 bottom-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 3" />
    <img id="svg-marketing-4" src={SvgMarketing4.src} class="absolute right-1/4 bottom-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 4" />
    <img id="svg-marketing-5" src={SvgMarketing5.src} class="absolute left-1/2 top-1/4 -translate-x-1/2 -translate-y-1/2 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem] pointer-events-none" alt="Decorativo 5" />
    <div class="relative z-10 flex flex-col items-center">
      <span class="text-3xl sm:text-6xl font-bold text-[#042e36] mb-2 drop-shadow">
        Marketing
      </span>
      <span class="text-base sm:text-4xl text-[#042e36]/80">
        Estrategias digitales para crecer y conectar con tu audiencia.
      </span>
    </div>
  </div>

  <!-- Sección DESARROLLO -->
  <div
    id="pantalla-desarrollo"
    class="fixed pointer-events-none flex flex-col items-center justify-center top-0 left-0 w-full h-screen opacity-0 z-30 text-center px-4"
    style="background: #f79b33"
  >
    <img id="svg-desarrollo-1" src={SvgDesarrollo1.src} class="absolute left-8 top-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 1" />
    <img id="svg-desarrollo-2" src={SvgDesarrollo2.src} class="absolute right-8 top-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 2" />
    <img id="svg-desarrollo-3" src={SvgDesarrollo3.src} class="absolute left-1/4 bottom-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 3" />
    <img id="svg-desarrollo-4" src={SvgDesarrollo4.src} class="absolute right-1/4 bottom-8 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem]" alt="Decorativo 4" />
    <img id="svg-desarrollo-5" src={SvgDesarrollo5.src} class="absolute left-1/2 top-1/4 -translate-x-1/2 -translate-y-1/2 opacity-0 w-[10vw] h-[10vw] max-w-[2.5rem] max-h-[2.5rem] sm:w-[30vw] sm:h-[30vw] sm:max-w-[14rem] sm:max-h-[14rem] pointer-events-none" alt="Decorativo 5" />
    <div class="relative z-10 flex flex-col items-center">
      <span class="text-3xl sm:text-6xl font-bold text-[#fefba4] mb-2 drop-shadow">
        Desarrollo web
      </span>
      <span class="text-base sm:text-4xl text-[#fefba4]/80">
        Sitios y aplicaciones modernas, rápidas y seguras.
      </span>
    </div>
  </div>

  <!-- Sección CONTACTO -->
<div
  id="pantalla-contacto"
  class="fixed pointer-events-none flex flex-col items-center justify-center top-0 left-0 w-full h-screen z-30 text-center px-4 opacity-0"
  style="background: #042e36; color: #fbd04a;"
>
<div class="w-full max-w-3xl bg-[#fefba4] rounded-xl shadow-lg p-8 flex flex-col gap-4 items-center mb-8">
  <h2 class="text-2xl sm:text-3xl font-bold text-[#042e36] text-center mb-2">
    ¿Por qué es importante tu branding?
  </h2>
  <p class="text-lg text-[#042e36]/90 text-center mb-4">
    Una buena imagen de marca te ayuda a diferenciarte, conectar con tu público y transmitir confianza. Es la base para que tu marca crezca y sea recordada.
  </p>
  <a href="/branding" class="bg-[#fbd04a] text-[#042e36] font-semibold rounded-md px-6 py-3 hover:bg-[#fbd04a] hover:text-white transition text-lg">
    Descubre más sobre branding
  </a>
</div>
  <div class="w-full max-w-md bg-[#042e36]/80 rounded-xl shadow-lg p-6 flex flex-col gap-4 items-center">
    <span class="text-4xl sm:text-6xl font-bold mb-2 drop-shadow text-[#fbd04a]">
      Contáctanos
    </span>
    <span class="text-base sm:text-2xl mb-4 text-[#fbd04a]/80">
      ¿Tienes un proyecto o duda? Escríbenos y te responderemos pronto.
    </span>
    <form 
      class="w-full flex flex-col gap-3"
      action="https://formsubmit.co/saraquintanadg@gmail.com" 
      method="POST"
    >
      <input
        type="text"
        name="name"
        placeholder="Nombre"
        class="rounded-md px-4 py-2 bg-[#fefba4] text-[#042e36] placeholder-[#042e36]/60 focus:outline-none"
        required
      />
      <input
        type="email"
        name="email"
        placeholder="Correo electrónico"
        class="rounded-md px-4 py-2 bg-[#fefba4] text-[#042e36] placeholder-[#042e36]/60 focus:outline-none"
        required
      />
      <textarea
        name="message"
        placeholder="Mensaje"
        rows="4"
        class="rounded-md px-4 py-2 bg-[#fefba4] text-[#042e36] placeholder-[#042e36]/60 focus:outline-none resize-none"
        required
      ></textarea>
      <!-- captcha -->
      <input type="hidden" name="_captcha" value="false">
      <!-- redirección tras enviar -->
      <input type="hidden" name="_next" value="https://sqstudio.es/gracias">
      <button
        type="submit"
        class="mt-2 bg-[#fbd04a] text-[#042e36] font-semibold rounded-md px-4 py-2 hover:bg-[#ffe066] transition text-2xl"
      >
        Enviar
      </button>
    </form>
  </div>
</div>

<footer
  id="footer"
  class="w-full flex flex-col items-center justify-center py-6 bg-[#042e36] text-[#fbd04a] text-center z-50 relative opacity-0"
>
  <span class="text-base sm:text-lg mb-2">© {new Date().getFullYear()} SQ Studio</span>
  <a
    href="https://instagram.com/sqstudiodm"
    target="_blank"
    rel="noopener noreferrer"
    class="inline-flex items-center gap-2 text-[#fbd04a] hover:text-[#ffe066] transition font-semibold"
    aria-label="Instagram SQ Studio"
  >
    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <rect width="18" height="18" x="3" y="3" rx="5" stroke="currentColor" />
      <circle cx="12" cy="12" r="4" stroke="currentColor" />
      <circle cx="17" cy="7" r="1.5" fill="currentColor" />
    </svg>
    @sqstudiodm
  </a>
</footer>
</Layout>

<style>
  #logo-mask {
    background: #fefba4; /* Color de fondo para la máscara */
    mask-image: url("/logo-stack.svg");
    mask-position: center 10%;
    mask-repeat: no-repeat;
    /* Optimización: valores más sensatos para desktop */
    mask-size: clamp(5000vh, 2000%, 0vh); 
  }

  @media (max-width: 640px) {
    #logo-mask {
      /* Optimización: valores más pequeños para móviles */
      mask-size: clamp(5000vh, 900%, 0vh); /* Reducido del 5000vh/900% */
      mask-position: center 19%;
    }
  }

  .fixed {
    pointer-events: none;
  }
  .fixed.pointer-events-auto {
    pointer-events: auto;
  }
</style>

<script>
  import { gsap } from "gsap"
  import { ScrollTrigger } from "gsap/ScrollTrigger"

  gsap.registerPlugin(ScrollTrigger)

  // Define propiedades de animación comunes para las figuras
  const figureEnterProps = {
    opacity: 1,
    scale: 1.1,
    rotate: "random(-360, 360)",
    x: "random(-50, 50)",
    y: "random(-50, 50)",
    duration: 1.5,
    ease: "power3.out",
  };

  const figureExitProps = {
    opacity: 0,
    scale: 0.7,
    rotate: "random(-180, 180)",
    x: "random(-30, 30)",
    y: "random(-30, 30)",
    duration: 0.8,
    ease: "power2.in",
  };

  // --- LÍNEA DE TIEMPO PARA TODA LA ANIMACIÓN ---
  const tl = gsap.timeline({
    ease: "power2.out",
    scrollTrigger: {
      trigger: "body",
      start: "top top",
      end: "bottom bottom", 
      scrub: 1,
      // markers: true,
    },
  });

  // Animaciones iniciales: 
  tl.to("#hero-key", { duration: 1, scale: 1 })
    .to("#hero-key-logo", { opacity: 0, duration: 0.5 }, "<")
    .to(
      "#logo-mask", 
      {
        maskSize: "clamp(7vh, 25%, 0.5vh)",
        duration: 1.5,
      },
      0.3
    )
    .to(
      "#hero-key", 
      {
        opacity: 0,
        duration: 0.7,
      },
      "<0.5"
    )
    .to(
      "#intro-animation-container", 
      {
        opacity: 0,
        pointerEvents: "none",
        duration: 0.5,
      },
      ">"
    );

  tl.to(
      "#final-message",
      {
        opacity: 1,
        duration: 0.7,
      }
    )
    .to(
      "#final-message",
      {
        opacity: 0,
        duration: 0.5,
        delay: 0.7,
      }
    )
    .to(
      "#after-hero",
      {
        opacity: 1,
        duration: 0.7,
      }
    )
    .to(
      "#after-hero",
      {
        opacity: 0,
        duration: 0.5,
        delay: 1.2,
      }
    )

    // --- PANTALLA DISEÑO GRÁFICO ---
    .to(
      "#pantalla-diseno",
      {
        opacity: 1,
        duration: 0.7,
        onStart: () => activarPantalla("pantalla-diseno"),
      }
    )
    .to("#svg-diseno-1", { ...figureEnterProps }, "<")
    .to("#svg-diseno-2", { ...figureEnterProps }, "<0.1")
    .to("#svg-diseno-3", { ...figureEnterProps }, "<0.2")
    .to("#svg-diseno-4", { ...figureEnterProps }, "<0.3")
    .to("#svg-diseno-5", { ...figureEnterProps }, "<0.4")
    

    // --- PANTALLA MARKETING ---
    .to(
      "#pantalla-marketing",
      {
        opacity: 1,
        duration: 0.7,
        onStart: () => activarPantalla("pantalla-marketing"),
      }
    )
    .to("#svg-marketing-1", { ...figureEnterProps }, "<")
    .to("#svg-marketing-2", { ...figureEnterProps }, "<0.1")
    .to("#svg-marketing-3", { ...figureEnterProps }, "<0.2")
    .to("#svg-marketing-4", { ...figureEnterProps }, "<0.3")
    .to("#svg-marketing-5", { ...figureEnterProps }, "<0.4")
 
    

    // --- PANTALLA DESARROLLO WEB ---
    .to(
      "#pantalla-desarrollo",
      {
        opacity: 1,
        duration: 0.7,
        onStart: () => activarPantalla("pantalla-desarrollo"),
      }
    )
    .to("#svg-desarrollo-1", { ...figureEnterProps }, "<")
    .to("#svg-desarrollo-2", { ...figureEnterProps }, "<0.1")
    .to("#svg-desarrollo-3", { ...figureEnterProps }, "<0.2")
    .to("#svg-desarrollo-4", { ...figureEnterProps }, "<0.3")
    .to("#svg-desarrollo-5", { ...figureEnterProps }, "<0.4")
    
    

    // --- PANTALLA CONTACTO ---
    .to(
      "#pantalla-contacto",
      {
        opacity: 1,
        duration: 0.7,
        onStart: () => activarPantalla("pantalla-contacto"),
      }
    )
    .to(
      "#footer",
      {
        opacity: 1,
        duration: 0.7,
      }
    )

    function activarPantalla(id: string) {
  document.querySelectorAll(".fixed").forEach(el => {
    el.classList.remove("pointer-events-auto");
    el.classList.add("pointer-events-none");
  });
  const pantalla = document.getElementById(id);
  if (pantalla) {
    pantalla.classList.remove("pointer-events-none");
    pantalla.classList.add("pointer-events-auto");
  }
}

</script>